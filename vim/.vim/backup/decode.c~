#include "header.h"
/* Denne her dekomprimerer filen slik at filen blir gjort fra den komprimerte 
 * til vanlige tegn. 
 */
int decode(char* inf){

    FILE* in_f = fopen(inf, "r");
    int d;
    int k=0;
    if(in_f){
        while((d = fgetc(in_f)) != EOF){
            unsigned char c = d;
            int counter = 7;
            for (k=0; k<4;k++){
                int b = c &(1<<counter|1<<(counter-1));

                if(b == 0){
                    printf("%c", ' ');
                }
                else if (b == 64 || b == 16 || b == 4 || b == 1){
                    printf("%c",':');
                }
                else if(b == 192 || b == 48 || b ==12 || b == 3){
                    printf("%c",'\n');
                }
                else if(b == 128 || b == 32 || b == 8 || b == 2){
                    printf("%c",'@');
                }else{
                    printf("ERROR");
                    exit(1);
                }
                counter=counter-2;
                if (counter > 7){
                    counter = 0;
                }
            }
        }
    }
    fclose(in_f);
    return 0;
}

